
<!DOCTYPE html>
<html lang="zh">
<head>
    <title>繁華如夢·恋舞动漫展示-子页面</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <meta charset="utf-8">
    <!-- Flat UI necessary-->
    <link href="https://unpkg.com/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://unpkg.com/anqila-webgl-star@1.0.6/css/dist/css/flat-ui.min.css" rel="stylesheet">
    <link href="https://unpkg.com/anqila-webgl-star@1.0.7/css/niuini.css" rel="stylesheet">
    

    <link rel="stylesheet" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
        /* 鼠标图标 */
        body {
        cursor: url("./files/x1.cur"), auto;
        }
        a,
        [type="button"]:not(:disabled),
        [type="reset"]:not(:disabled),
        [type="submit"]:not(:disabled),
        button:not(:disabled){
        cursor: url("./files/x2.cur"), auto !important;
        }
    </style>
</head>

<body style="overscroll-behavior: none;">
<script src="https://unpkg.com/anqila-webgl-star@1.0.2/js/jquery.min.js"></script>
<div id="overlay">
    <button id="startButton">Play</button>
</div>
<div id="wrap">

        
        <div class="container">

        <!-- 播放窗口 -->
        <div class="jumbotron project_container" >
            <!--fixed  Fps Tip-->
            <div class="infoFps" >
                <p id="otherinfo2" class="smallsize-font smallsize-font-chrome"></p>
            </div>
            <!--gui.dat控件-->
            <div id="guiDat">
            </div>

            <!--fixed Row 警示框-->
            <div class="row tipAlert"  style="display:none;">


                <div id="myAlert" class="col-lg-offset-4 col-md-offset-4 col-md-offset-3 col-sm-offset-3 col-xs-offset-1 col-xs-10 col-sm-6 col-md-4 alert alert-warning alert-dismissable " data-dismiss="modal" aria-hidden="true">
                    <button type="button" id ="closeAlertBtn" class="close">
                        &times;
                    </button>
                    推荐使用WebKit、Gecko内核浏览器体验,例如Chrome、Firefox、360浏览器等。
                    <p style="text-align: left;">
                        pc端：按住鼠标左键，移动鼠标可移动视角；使用滚轮或按住中键，可缩放视图大小；按住右键，可平移视角位置；
                    </p>
                    <p style="text-align: left;">
                        移动端：使用单指触摸移动视角；双指缩放视图大小；三指平移视角位置
                    </p>


                    <button   class="begainPlayBtn close btn btn-default  " style="position: relative; right: 46%;display: none;">
                        <span id="begainPlayBtn" class="glyphicon glyphicon-play" >开始</span>
                    </button>
                </div>

            </div>

            <!--fixed Row 进度条-->
            <div class="row foot">
                <div id="progressModular" class="col-lg-offset-4 col-md-offset-4 col-md-offset-3 col-sm-offset-3 col-xs-offset-1 col-xs-10 col-sm-6 col-md-4 ">
                    <p id="progressTitle"></p>
                    <div id="progressBarF" class="progress progress-striped  active" style="display: none;">
                        <div id="progressBar" class="progress-bar progress-bar-info " style="width: 0%;">
                        </div>
                    </div>
                </div>
            </div>



            <!--fixed 日志显示-->
            <div class=" infoLog">
                <p align="left" class=" text-primary smallsize-font smallsize-font-chrome" id="progressLog">
                </p>
            </div>


            <div class="footControler">


                <div class=" controlerPause " data-toggle="tooltip" title="播放">
                    <i  id="controlerPause" class="fa fa-play" aria-hidden="true"></i>

                </div>


                <div class=" controlerFullscreen " data-toggle="tooltip" title="全屏"  >
                    <i id="controlerFullscreen" class="fa fa-expand" aria-hidden="true"></i>
                </div>

                <div class=" controlerVolume " data-toggle="tooltip" title="音量100%">
                    <i id="controlerVolume" class="fa fa-volume-up" aria-hidden="true"></i>

                </div>

                <div class=" controlerHeadphones " data-toggle="tooltip" title="3D音效"  >
                    <i  id="controlerHeadphones" class="fa fa-headphones" aria-hidden="true"></i>
                </div>

                <div class=" controlerVideo " data-toggle="tooltip"  title="自动镜头" >
                    <i id="controlerVideo" class="fa fa-video-camera" aria-hidden="true"></i>
                </div>

                <div class=" controlerInfo " data-toggle="tooltip" title="显示信息"  >
                    <i id="controlerInfo" class="fa fa-info-circle" aria-hidden="true"></i>
                </div>

                <div class=" controlerCog " data-toggle="tooltip" data-placement="bottom" title="设置"  >
                    <i  id="controlerCog" class="fa fa-cog" aria-hidden="true"></i>
                </div>
                <div class=" controlerClose " data-toggle="tooltip" data-placement="bottom" title="关闭"  >
                    <i id="controlerClose" class="fa fa-close" aria-hidden="true"></i>
                </div>
                

            </div>
        </div>
    </div>
    <div id="push"></div>
</div>
    <script src="./js/newindex.js"></script>
    <!-- footer -->

    <script src="https://cdn.bootcdn.net/ajax/libs/flat-ui/2.3.0/js/flat-ui.min.js"></script>

    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/layer.js"></script>

    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/Three.js"></script>
    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/dat.gui_modify.js"></script>

    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/OrbitControls.js"></script>

    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/mmdPlay/libs/mmdparser.min.js"></script>
    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/mmdPlay/libs/ammo.js"></script>
    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/mmdPlay/libs/Detector.js"></script>

    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/mmdPlay/loaders/TGALoader.js"></script>
    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/mmdPlay/loaders/MMDLoader.js"></script>

    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/mmdPlay/effects/OutlineEffect.js"></script>

    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/mmdPlay/animation/CCDIKSolver.js"></script>
    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/mmdPlay/animation/MMDPhysics.js"></script>

    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/mmdPlay/Mirror/Mirror.js"></script>
    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/mmdPlay/SkyShader/SkyShader.js"></script>
    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/mmdPlay/jq/jquery.mousewheel.min.js"></script>

    <script src="https://unpkg.com/anqila-webgl-star@1.0.0/js/threejs/project/control.js"></script>
    <script>
        let binlist = ['./heita/黑塔.pmx', './Bailu/白露1.0.pmx', './aishida/星穹铁道—艾丝妲160.pmx', './buluoniya/布洛妮娅 1.0.pmx', './fuxuan/符玄（鞋+发饰补差145cm）(修).pmx', './jizhi/姬子2.0.pmx', './kafka/卡芙卡.pmx', './kelala/克拉拉.pmx', './lishushang/李素裳1.0.pmx', './nvzhu/女主1.0.pmx', './qingque/青雀（分桦）.pmx', './sangyueqi/三月七 1.0.pmx', './tingyun/停云.pmx', './xier/希儿1.0.pmx', './xiluwa/希露瓦1.0.pmx', './yinglan/银狼.pmx', './luotianyi/洛天依·三月雨常服.pmx', './hutao/胡桃.pmx', './ganyu/甘雨.pmx', './keli/可莉2.0.pmx', './keqing/刻晴.pmx', './leidian/雷电将军.pmx', './naxida/纳西妲.pmx', './nilu/妮露.pmx', './qiqi/七七.pmx', './shenglilinghua/神里绫华.pmx', './xinghai/珊瑚宫心海.pmx', './yaoyao/瑶瑶.pmx', './baconshengzhi/八重神子.pmx']
        let appp = Math.floor(Math.random()*binlist.length);
        var  modelFile;
        var motionFiles;
        var cameraFiles;
        var audioFile;
        let cardF = window.parent.document.querySelectorAll('.webgls .card');
        let cardE = window.parent.document.querySelectorAll('.webglsMotions .card');
        // let flag = false;
        let cardFFlag = false;
        let cardEFlag = false;
        cardF.forEach(card => {
            card.children[0].addEventListener('click', function() {
                modelFile = binlist[card.getAttribute('data-num')];
                cardFFlag = true;
                if (!cardEFlag && cardFFlag) ReSelected(0, 1, '.webglsMotions', '.webgls');
                if (cardFFlag && cardEFlag) LoadMMDFileInit();
            })
        })
        let fuModelPath = binlist[appp];
        let MotCamAuto = [{'motionName':'红昭愿', 'motionFiles':'./luotianyi/201904202121169044.vmd', 'cameraFiles':'./luotianyi/201904202121539841.vmd', 'audioFile': "./luotianyi/201904202132351044.mp3"}, {'motionName':'Stay Tonight Heaven Lee Ver','motionFiles':'./dance/mo30486ed1e37cede0feae8cb196e1b2e7.vmd', 'cameraFiles':'./dance/jinga7f6234e728a940a72fff0f5871605ff.vmd', 'audioFile': "./dance/【动作配布】Stay Tonight Heaven Lee Ver.mp3"}];

        cardE.forEach(card => {
            card.children[0].addEventListener('click', function() {
                let mot = MotCamAuto[card.getAttribute('data-num')];
                motionFiles = [mot.motionFiles];
                cameraFiles = [mot.cameraFiles];
                audioFile =    mot.audioFile;
                cardEFlag = true;
                if (!cardFFlag && cardEFlag) ReSelected(1, 0, '.webgls', '.webglsMotions');
                if (cardFFlag && cardEFlag) LoadMMDFileInit();
            })
        })            

        function ReSelected(n, m, c1, c2) {
            let seci0 = window.parent.document.querySelector('#sections');
            seci0.children[n].className = 'selected';
            seci0.children[m].className = '';
            $(window.parent.document.querySelector(c1)).stop().fadeIn(500);
            $(window.parent.document.querySelector(c2)).stop().fadeOut(500);
        }
    </script>
    <script src="https://unpkg.com/anqila-webgl-star@1.0.7/js/threejs/project/main.js"></script>
</body>

</html>